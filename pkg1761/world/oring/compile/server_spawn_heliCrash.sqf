private["_position","_veh","_num","_config","_itemType","_itemChance","_weights","_index","_iArray", "_staticcoords","_spawnFire","_fadeFire"];
	
waitUntil{!isNil "BIS_fnc_selectRandom"};
if (isDedicated) then {
	_spawnFire = true;
	_fadeFire = false;
	_staticcoords =
		[[4864.9863, 5491.8022],
		[4512.5439, 5632.9238],
		[4435.1787, 5524.8311],
		[5191.7476, 4303.7739],
		[1530.7518, 7487.9072],
		[1929.9808, 7718.0767],
		[2427.167, 6814.2593],
		[1830.3944, 6009.5698],
		[3695.9231, 4898.9966],
		[3577.5486, 7249.7793],
		[3565.6724, 7088.8232],
		[1679.2509, 9793.7168],
		[1478.8961, 9773.4824],
		[853.95361, 9509.2344],
		[652.12292, 9530.7402],
		[4348.936, 8801.0986],
		[2830.4617, 8792.791],
		[1089.1257, 9384.9209],
		[8475.6182, 4918.1953],
		[8773.7842, 4839.8193],
		[8958.5654, 5028.7153],
		[9025.3135, 4495.3892],
		[4912.5244, 7485.8257],
		[6283.9434, 7670.0947],
		[6149.4502, 7600.4067],
		[6014.3667, 7401.2876],
		[5878.7378, 7232.0874],
		[5198.1846, 7333.2114],
		[5234.5117, 7748.8003],
		[7910.8687, 7067.7681],
		[7840.7749, 7306.6177],
		[9490.6113, 9842.2002],
		[9196.2861, 9862.5234],
		[9136.3691, 9693.2461],
		[8853.0889, 9468.1357],
		[9690.9424, 9309.2842],
		[9896.9355, 9783.4727],
		[5552.124, 9034.4443],
		[5537.7104, 9164.248],
		[5185.2363, 5012.478],
		[5156.3667, 5246.6899],
		[4983.0352, 5784.8818],
		[4959.6313, 5579.1802],
		[1744.9674, 7072.5659],
		[1905.5264, 7047.6294],
		[2630.5474, 3562.8237],
		[2895.8464, 3523.6687],
		[2892.0684, 3749.5742],
		[2894.9448, 4017.2981],
		[1722.9113, 4200.0728],
		[1911.6215, 4252.7803],
		[937.99298, 1950.3936],
		[816.97028, 2004.5978],
		[899.36884, 2255.4011],
		[2743.5476, 2282.4819],
		[1233.6184, 3063.9429],
		[7692.6704, 2190.3301],
		[7941.1265, 2319.0986],
		[7824.2686, 2450.97],
		[8342.0547, 2363.5317],
		[8320.8145, 2138.4436],
		[7276.2988, 2077.7944],
		[7079.646, 1942.0115],
		[6005.1626, 3361.8933],
		[9237.0869, 4138.2007],
		[9389.9053, 4324.9492],
		[9265.79, 4478.9756],
		[7573.354, 4133.6084],
		[7531.6709, 3984.3384],
		[4277.311, 1826.8973],
		[4442.5151, 2143.0562],
		[4181.9204, 2444.2485],
		[4146.3999, 2115.04],
		[4943.8794, 1845.3701],
		[5015.0601, 1612.4603],
		[7219.8823, 3377.1882],
		[7276.8955, 3444.3469],
		[7189.6533, 3635.5562],
		[8457.2109, 3855.3574],
		[2943.571, 3298.0718],
		[2925.0337, 3414.5049],
		[6303.8804, 1609.7469],
		[6037.2822, 1570.2731],
		[9465.0176, 2587.5127],
		[9559.3691, 2742.0186],
		[9350.2695, 3675.8389],
		[9074.0947, 4120.9746],
		[7080.1714, 7347.0088],
		[8986.5654, 7389.959],
		[9034.7734, 7303.8638],
		[6932.3706, 8582.7939],
		[7112.3872, 7904.0347],
		[7678.8271, 8212.6455],
		[7600.6362, 7879.7861],
		[7873.0879, 8028.5615],
		[8056.7305, 8120.5396],
		[8196.585, 7863.4556],
		[8263.6533, 6101.4082],
		[8425.4199, 6011.1675],
		[8416.6963, 6126.1816],
		[8492.2998, 6465.4629],
		[7602.5439, 6059.4707],
		[7488.0039, 6154.584],
		[7783.459, 6044.4468],
		[7733.2432, 6025.3794],
		[7964.4111, 5971.5137],
		[8154.9707, 5458.502],
		[8447.9727, 4425.8784],
		[8535.7236, 4597.8926],
		[8399.6416, 4666.3647],
		[8567.165, 5417.7144],
		[8362.5635, 5424.9907],
		[8823.2559, 5440.2275],
		[8868.1816, 5402.3306],
		[1332.4918, 7675.0488],
		[1194.0084, 7897.707],
		[1129.8683, 7833.8359],
		[1074.0485, 7684.4683],
		[3535.6018, 8748.9541],
		[6397.7202, 2248.0559],
		[6500.313, 2249.5374],
		[978.60242, 5233.3594],
		[5669.4282, 5319.0854],
		[5828.7646, 5208.9141],
		[5809.2637, 4705.6816],
		[5807.9194, 4913.4297],
		[5604.3799, 5109.6416],
		[4759.0488, 4759.5742],
		[4930.0205, 4544.0229],
		[5361.3462, 4524.9106],
		[2648.5828, 6401.9038],
		[2451.6853, 6091.2114],
		[2525.1211, 5963.7866],
		[2497.3782, 6203.9683],
		[2667.4229, 6187.3604],
		[1412.2548, 3581.6372],
		[1469.0702, 3715.8389],
		[2035.9658, 3059.2468],
		[3540.7795, 2348.0664],
		[3552.3123, 2458.0679],
		[3523.2009, 2221.2007],
		[3236.126, 2783.5376],
		[3254.449, 2957.3838],
		[2162.0461, 2866.9255],
		[1783.4045, 2706.0337],
		[1362.7579, 2389.7827],
		[7861.5322, 6474.019],
		[7873.2949, 6592.957],
		[7711.4243, 6516.8027],
		[5348.0747, 2596.9175],
		[7914.6484, 2106.9207],
		[7779.6953, 2869.8704],
		[8632.7217, 3493.1121],
		[5905.4116, 2930.52],
		[6294.9683, 2697.8391],
		[7714.21, 3099.333],
		[5314.4731, 2117.262],
		[5297.582, 2211.4136],
		[4821.0933, 2344.4241],
		[2425.3237, 5369.6387],
		[2265.989, 5525.7788],
		[2295.3833, 5249.7754],
		[2257.9746, 4978.3105],
		[2833.5918, 4926.7568],
		[8732.1973, 2572.8853],
		[8990.1592, 2667.4651],
		[2525.7207, 7770.5908],
		[2766.7808, 7578.814],
		[1595.5587, 8245.2207],
		[5207.8438, 8592.6699],
		[4202.0947, 8564.0957],
		[809.76013, 9957.4482],
		[1662.0841, 9776.457],
		[1837.3561, 9788.8066],
		[958.8158, 4719.9336],
		[1547.8087, 2088.2722],
		[5602.7749, 5731.9668],
		[4128.7026, 9136.7305],
		[4309.373, 9285.9824],
		[4764.0552, 9199.0547],
		[3469.416, 8530.4053],
		[1241.4203, 7278.6655],
		[1372.3173, 7172.8809],
		[1147.6772, 7176.8428],
		[4656.147, 7598.145],
		[4314.7085, 5187.4282],
		[3065.3459, 4816.3921],
		[2932.5984, 4696.5732],
		[2906.01, 4570.4756],
		[1372.8182, 6501.668],
		[2806.6333, 2824.9546],
		[3363.0649, 2518.6228],
		[3191.3865, 3606.437]];
	
	_position = _staticcoords select (floor random (count _staticcoords));
	_veh = createVehicle ["UH1Wreck_DZ",_position, [], 0, "CAN_COLLIDE"];
	dayz_serverObjectMonitor set [count dayz_serverObjectMonitor,_veh];
	diag_log("DEBUG: Spawning HeliCrash at " + str(_position) + "");
	_veh setVariable ["ObjectID",1,true];
	dayzFire = [_veh,2,time,false,false];
	publicVariable "dayzFire";
	if (isServer) then {
		//waitUntil{!isNil "BIS_Effects_Burn"};
		nul=dayzFire spawn BIS_Effects_Burn;
	};

	_num = round(random 4) + 3;
	_config = 		configFile >> "CfgBuildingLoot" >> "HeliCrash";
	_itemType =
		[["FN_FAL", "weapon"],
		["M14_EP1", "weapon"],

		["ItemGPS", "generic"],
		["NVGoggles", "weapon"],
		["DZ_Backpack_EP1", "object"],
		["M9SD", "weapon"],

		["Mk_48_DZ", "weapon"],
		["M240_DZ", "weapon"],
		["M249_DZ", "weapon"],

		["AmmoBoxSmall_556", "object"],
		["AmmoBoxSmall_762", "object"],
		["MedBox0", "object"],
		["FoodBox1", "object"],

		["Skin_BW1_DZ", "magazine"],
		["Skin_Sniper1_DZ", "magazine"],

		["M4A1_AIM_SD_camo", "weapon"],
		["bizon_silenced", "weapon"],
		["MP5SD", "weapon"],

		["AK_107_pso", "weapon"],
		["M4A1_RCO_GL", "weapon"],
		["M4SPR", "weapon"],
		["G36K_camo", "weapon"],

		["C1987_G3_acog", "weapon"],
		["M40A3", "weapon"],
		["DMR", "weapon"],
		["SVD_des_EP1", "weapon"],
		["KPFS_MG1", "weapon"],
		["KPFS_MP5A3SD", "weapon"],
		["SVD", "weapon"]];
	_itemChance =
		[0.02,
		0.015,

		0.015,
		0.005,
		0.01,
		0.02,

		0.005,
		0.01,
		0.02,

		0.015,
		0.015,
		0.02,
		0.015,

		0.005,
		0.02,

		0.01,
		0.02,
		0.02,

		0.02,
		0.015,
		0.015,
		0.02,

		0.01,
		0.005,
		0.01,
		0.01,
		0.01,
		0.03,
		0.01];

	//diag_log ("DW_DEBUG: _itemType: " + str(_itemType));	
	//diag_log ("DW_DEBUG: _itemChance: " + str(_itemChance));	
	//diag_log ("DW_DEBUG: (isnil fnc_buildWeightedArray): " + str(isnil "fnc_buildWeightedArray"));	
	
	waituntil {!isnil "fnc_buildWeightedArray"};
	
	_weights = [];
	_weights = 		[_itemType,_itemChance] call fnc_buildWeightedArray;
	//diag_log ("DW_DEBUG: _weights: " + str(_weights));	
	for "_x" from 1 to _num do {
		//create loot
		_index = _weights call BIS_fnc_selectRandom;
		sleep 1;
		if (count _itemType > _index) then {
			//diag_log ("DW_DEBUG: " + str(count (_itemType)) + " select " + str(_index));
			_iArray = _itemType select _index;
			_iArray set [2,_position];
			_iArray set [3,5];
			_iArray call spawn_loot;
			_nearby = _position nearObjects ["WeaponHolder",20];
			{
				_x setVariable ["permaLoot",true];
			} forEach _nearBy;
		};
	};
};